<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>



    <style>
        circle.dimple-series-1 {
            fill: red;
        }

        h1 {
            text-align: center;
            font-size: 48px;
        }
        h3{
            font-size: 36px;

        }

    </style>
    <div id="chartContainer">
        <script type="text/javascript">
            //creating a container for the graph
            var svg = dimple.newSvg("#chartContainer",590,400);
            //main function where it all takes place
            function draw(data) {
                /*
                 D3.js setup code
                 */

                "use strict";
                //commenting out debugger that was used to explore data
                //debugger;
                var margin = 75,
                    width = 1400 - margin,
                    height = 800 - margin;

                //creating title for graph
                d3.select("body")
                    .append("h1")
                    .text("Baseball HR/Average Total VS Weight/Handedness")
                    .append("h3")
                    .text("What makes a Good Baseball Player at the Plate?")
                    .append("h6")
                    .text(" It is clear that baseball " +
                        "players who weigh more are overall more likely to hit homeruns  than baseball " +
                        "players that are lighter. ")
                    .append("h6")
                    .text("There is a clear trend among baseball players in the data that shows that right-hand"
                        +"hitters are overall better hitters than both left-hand hitters and 'both'-hand hitters");
                ;

                //establishing chart size
                var svg = d3.select("body")
                    .append("svg")
                    .attr("width", width + margin)
                    .attr("height", height + margin)
                    .append('g')
                    .attr('class','chart')

                /*
                 Dimple.js Chart construction code
                 */

                var myChart = new dimple.chart(svg, data);


                //category variable of handedness
                var x = myChart.addCategoryAxis("x", 'handedness');
                //using the averages because there is definately less 'both' handedness than left and right

                //creating both y measures
                var y =myChart.addMeasureAxis('y',"HR");
                //changing the title from the default
                y.title ="Home Runs";
                //locking bounds
                y.overrideMax = 2000;
                y.overrideMin = 50;

                y.aggregate = dimple.aggregateMethod.avg;
                var y2 = myChart.addMeasureAxis('y','avg');
                //changing the title from the default
                y2.title = "Batting Average";
                y2.ovverrideMin = 0.1;
                y2.overrideMax = 2.8;
                var f =d3.format(".1f");
                myChart.addSeries("Batting Average",dimple.plot.scatter,[x,y2]);
                //putting the hr totals in order
                x.addOrderRule('HR',true);
                //creating the bargraph
                var hands = myChart.addSeries('Player ', dimple.plot.bar);

                //adding the animation based on the weight of the players
                //there is a wide range of weight and the animation allows for the graph to reflect that neatly

                //adding a legend
                var myLegend = myChart.addLegend(1200,0,50,300,'Top');

                var story = myChart.setStoryboard("weight");

                //adjusting story duration from 3000 to 4000
                story.frameDuration = 4000;
                //ordering the story by weight
                story.addOrderRule("weight");
                myChart.draw();

                myChart.legends = [];



                svg.selectAll("title_text")
                    .data(["handedness:"])
                    .enter()
                    .append("text")
                    .attr("x", 1130)
                    .attr("y", 7)
                    .style("font-family", "sans-serif")
                    .style("font-size", "10px")
                    .style("color", "Black")
                    .text(function (d) { return d; });
            };

        </script>
    </div>
</head>
<body>
<script type = "text/javascript">
    //main function that reads from the csv and calls draw method
    d3.csv("baseball_data.csv",draw);
</script>
</body>
</html>
